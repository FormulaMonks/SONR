# This should be sourced from other scripts, not called directly.

echo "About to configure environment variables"

unset GEM_HOME
unset GEM_PATH

export RBENV_ROOT="${OPENSHIFT_BUILD_DEPENDENCIES_DIR}.rbenv"
export PATH="$RBENV_ROOT/bin:$PATH"
eval "$(rbenv init -)"
rbenv rehash

rbenv global `cat $OPENSHIFT_REPO_DIR/.ruby-version`

# Configure Redis URL
: ${REDIS_PASSWORD:?"You need to install the Redis cartridge (password)"}
: ${OPENSHIFT_REDIS_PORT:?"You need to install the Redis cartridge (port)"}
: ${OPENSHIFT_REDIS_HOST:?"You need to install the Redis cartridge (host)"}
export REDIS_URL="redis://:${REDIS_PASSWORD}@${OPENSHIFT_REDIS_HOST}:${OPENSHIFT_REDIS_PORT}/0"

# Configure Rack and Unicorn
RACK_ENV=production
